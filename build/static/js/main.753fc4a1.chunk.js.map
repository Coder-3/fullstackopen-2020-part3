{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Filter","inputValue","changeFunction","value","onChange","PersonForm","onSubmit","nameValue","nameChange","numberValue","numberChange","type","Person","person","onClickFunction","name","number","onClick","Notification","message","className","ErrorMessage","App","useState","persons","setPersons","matchingPersons","setMatchingPersons","newName","setNewName","newNumber","setNewNumber","searchedName","setSearchedName","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","personsService","deletePerson","event","personName","personId","thePerson","forEach","toString","getPersonName","target","window","confirm","setTimeout","catch","error","map","filter","toLowerCase","includes","preventDefault","personObject","thePersonId","getPersonId","concat","length","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.753fc4a1.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request =  axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = id => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst updateNumber = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, deletePerson, updateNumber }","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\nimport './index.css'\n\nconst Filter = ({ inputValue, changeFunction }) => {\n  return (\n    <div>filter shown with <input value={inputValue} onChange={changeFunction}></input></div>\n  )\n}\n\nconst PersonForm = ({ onSubmit, nameValue, nameChange, numberValue, numberChange }) => {\n  return (\n    <div>\n       <form onSubmit={onSubmit}>\n       <div>name: <input value={nameValue} onChange={nameChange} /></div>\n        <div>number: <input value={numberValue} onChange={numberChange} /></div>\n        <div><button type=\"submit\">add</button></div>\n       </form>\n    </div>\n  )\n}\n\nconst Person = ({ person, onClickFunction }) => {\n  return (\n    <>\n      <p>{person.name} {person.number}</p>\n      <button onClick={onClickFunction} id={person.id}>delete</button>\n    </>\n  )\n}\n\nconst Notification = ({ message }) => {\n  if(message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"success\">\n      {message}\n    </div>\n  )\n}\n\nconst ErrorMessage = ({ message }) => {\n  if(message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([])\n  const [ matchingPersons, setMatchingPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchedName, setSearchedName ] = useState('')\n  const [ successMessage, setSuccessMessage ] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(response => {\n        setPersons(response)\n    })\n  }, [])\n\n  const getPersonName = personId => {\n    let thePerson\n    persons.forEach(person => {\n      if(person.id.toString() === personId) {\n        thePerson = person.name\n      }\n    })\n    return thePerson\n  }\n\n  const getPersonId = personName => {\n    let thePersonId\n    persons.forEach(person => {\n      if(person.name === personName) {\n        thePersonId = person.id\n      }\n    })\n    return thePersonId\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    \n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n\n    if(persons.map(person => person.name).includes(newName)) {\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const personId = getPersonId(newName)\n        personsService\n        .updateNumber(personId, personObject)\n        .then(response => {\n          setPersons(persons.map(person => person.id !== personId ? person : response))\n          setSuccessMessage(`Updated ${newName}'s number`)\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setErrorMessage(`unable to update ${newName}`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n      }\n    } else {\n      personsService\n        .create(personObject)\n        .then(response => {\n          setPersons(persons.concat(response))\n          setSuccessMessage(`Added ${newName}`)\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, 5000)\n      })\n      .catch(error => {\n        setErrorMessage(`${error.response.data}`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const deletePerson = event => {\n    const personName = getPersonName(event.target.id)\n    if(window.confirm(`Delete ${personName} ?`)) {\n      personsService\n      .deletePerson(event.target.id)\n      .then(response => {\n        personsService\n        .getAll()\n        .then(response => {\n          setPersons(response)\n          setSuccessMessage(`Deleted ${personName}`)\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, 5000)\n        })\n      })\n      .catch(error => {\n        setErrorMessage(`Information of ${personName} was already removed from the server`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearch = (event) => {\n    setSearchedName(event.target.value);\n    const allPersons = persons.map(person => person.name)\n    const matchingPersons = allPersons.filter(person => person.toLowerCase().includes(searchedName.toLowerCase()))\n    setMatchingPersons(matchingPersons)\n  }\n\n  const displayNumbers = () => {\n    if(!matchingPersons.length || searchedName === '') {\n      return persons\n    } else {\n      return persons.filter(person => matchingPersons.includes(person.name))\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      \n      <Notification message={successMessage} />\n      <ErrorMessage message={errorMessage} />\n      <Filter inputValue={searchedName} changeFunction={handleSearch} />\n      \n      <h2>add a new</h2>\n      \n      <PersonForm\n        onSubmit={addPerson} nameValue={newName} nameChange={handleNameChange}\n        numberValue={newNumber} numberChange={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n\n        {displayNumbers().map(person =>\n          <Person key={person.id} person={person} onClickFunction={deletePerson} />\n        )}\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}